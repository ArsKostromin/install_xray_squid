# install_xray_squid


````markdown
# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Xray + Squid —Å TLS

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Xray —Å VLESS+WS+TLS –∏ Squid-–ø—Ä–æ–∫—Å–∏ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ `htpasswd`. –í—Å—ë –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ: –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–æ –∑–∞–ø—É—Å–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–æ–≤.

## üßæ –ß—Ç–æ —Å—Ç–∞–≤–∏–º

- ‚úÖ Xray (VLESS, WS, TLS)
- ‚úÖ Squid –Ω–∞ `127.0.0.1:8888` —Å –ª–æ–≥–∏–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º
- ‚úÖ Let's Encrypt TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- ‚úÖ Cron –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- ‚úÖ –õ–æ–≥–∏ Xray –∏ Squid

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–°–∫—Ä–∏–ø—Ç —Å–∞–º –≤—Å—ë –ø–æ—Å—Ç–∞–≤–∏—Ç:

```bash
curl gnupg2 ca-certificates lsb-release debian-archive-keyring apt-transport-https software-properties-common sudo unzip cron socat jq nano squid apache2-utils certbot
````

---

## ‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–£–±–µ–¥–∏—Å—å**, —á—Ç–æ:

   * –£ —Ç–µ–±—è –µ—Å—Ç—å **–¥–æ–º–µ–Ω**, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (A-–∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç)
   * –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ **–Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 443**

2. **–°–∫–ª–æ–Ω–∏—Ä—É–π –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç**:

```bash
git clone https://github.com/—Ç–≤–æ–π-–≥–∏—Ç/xray-squid-auto.git
cd xray-squid-auto
chmod +x install_xray_squid.sh
./install_xray_squid.sh example.com
```

–ó–∞–º–µ–Ω–∏ `example.com` –Ω–∞ —Å–≤–æ–π –¥–æ–º–µ–Ω.

3. **–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏** —Ç—ã —É–≤–∏–¥–∏—à—å VLESS-–∫–æ–Ω—Ñ–∏–≥:

```
vless://<UUID>@<domain>:443?encryption=none&security=tls&type=ws&host=<domain>&path=%2Fws#user-XXXXXX
```

---

## üõ† –ì–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç

| –ß—Ç–æ                     | –ü—É—Ç—å                                    |
| ----------------------- | --------------------------------------- |
| Xray –∫–æ–Ω—Ñ–∏–≥             | `/usr/local/etc/xray/config.json`       |
| –õ–æ–≥–∏ Xray               | `/var/log/xray/access.log`, `error.log` |
| Squid –∫–æ–Ω—Ñ–∏–≥            | `/etc/squid/squid.conf`                 |
| Squid –ø–∞—Ä–æ–ª–∏            | `/etc/squid/passwd`                     |
| TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç          | `/etc/letsencrypt/live/<domain>/`       |
| Cron –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è TLS | `/etc/cron.daily/renew-cert.sh`         |

---

## üßØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞                               | –†–µ—à–µ–Ω–∏–µ                                             |
| -------------------------------------- | --------------------------------------------------- |
| `certbot` –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç | –£–±–µ–¥–∏—Å—å, —á—Ç–æ DNS —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ—Ä—Ç 80/443 –Ω–µ –∑–∞–Ω—è—Ç    |
| Xray –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç                       | –ü—Ä–æ–≤–µ—Ä—è–π `journalctl -u xray -xe`                   |
| Squid —Ä—É–≥–∞–µ—Ç—Å—è                         | –°–º–æ—Ç—Ä–∏ `journalctl -u squid -xe` –∏ –ø—Ä–æ–≤–µ—Ä—å `passwd` |
| –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è             | –ó–∞–ø—É—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é: `certbot renew`                    |

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* Squid —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ `127.0.0.1`
* –í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ TLS
* UUID + –ø–∞—Ä–æ–ª—å —à–∏—Ñ—Ä—É—é—Ç—Å—è –≤ WebSocket

---

## ü§ò –ê–≤—Ç–æ—Ä

–°–∫—Ä–∏–ø—Ç —Å–¥–µ–ª–∞–Ω —Å –¥—É—à–æ–π –∏ –Ω–µ–Ω–∞–≤–∏—Å—Ç—å—é –∫ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

---


